(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t,a){e.exports=a.p+"static/media/auction.7c1db123.svg"},156:function(e,t,a){e.exports=a(390)},161:function(e,t,a){},208:function(e,t,a){},241:function(e,t){},243:function(e,t){},268:function(e,t){},311:function(e,t){},386:function(e,t,a){},390:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(19),r=a.n(c),o=(a(161),a(146)),s=a(45),l=a(16),u=a.n(l),m=a(33),d=a(25),h=a(26),p=a(28),b=a(27),f=a(29),g=a(7),E=a(20),v=a.n(E),w=a(147),k=a.n(w),y=a(78),O=a.n(y),j=a(150),C=a.n(j),N=a(151),x=a.n(N),S=(a(204),a(206),a(208),a(3)),B=a(392),A=a(394),I=a(393),T=a(46),D=a.n(T);function P(){return L.apply(this,arguments)}function L(){return(L=Object(m.a)(u.a.mark(function e(){var t,a,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a="ropsten",!window.ethereum){e.next=7;break}return t=new D.a(window.ethereum),e.next=5,window.ethereum.enable();case 5:e.next=8;break;case 7:window.web3&&(t=new D.a(window.web3.currentProvider));case 8:if(!t){e.next=12;break}return e.next=11,t.eth.net.getNetworkType();case 11:a=e.sent;case 12:return n=new D.a(new D.a.providers.WebsocketProvider("wss://".concat(a,".infura.io/ws/"))),e.abrupt("return",{web3:t,readOnlyWeb3:n});case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var z,W,F,H,M,U=a(47),J=a.n(U),K=(a(386),[]),R="100000000000",V=function(e){var t,a,n=function(){t&&t.focus()};e.append?a=i.a.createElement(S.i,{onClick:n,addonType:"append"},e.append):e.appendIcon&&(a=i.a.createElement(S.i,{onClick:n,addonType:"append"},i.a.createElement("span",{className:"input-group-text"},i.a.createElement("i",{className:e.appendIcon}))));var c="flyingLabel ".concat(e.showLabel||e.value?"visible":""),r=e.onChange,o=e.onKeyDown,s=e.type,l=e.value,u=e.step||R,m=e.min||0;return"eth"===s&&(s="text",l=H(e.value),r=function(t){var a=t.target.value;if(!isNaN(a)){var n=new F(M(a));n.lt(1)||n.lt(m)||e.onChange({target:{name:e.name,value:n}})}},o=function(t){var a=u.clone();if(38===t.keyCode);else{if(40!==t.keyCode)return;a.negative=1}var n=e.value.add(a);n.lt(1)||n.lt(m)||e.onChange({target:{name:e.name,value:n}})}),i.a.createElement(S.f,null,i.a.createElement(S.j,{className:c,for:e.name},e.label),i.a.createElement(S.h,null,i.a.createElement(S.g,{className:"withFlyingLabel",autoComplete:"off",onChange:r,onKeyDown:o,value:l,bsSize:e.size||"lg",type:s||"text",name:e.name,id:e.name,onFocus:e.onFocus,placeholder:e.placeholder,innerRef:function(e){return t=e}},e.children),a))},Z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={moment:a.props.value||v()(),showPicker:!1},a.onChange=a.onChange.bind(Object(g.a)(Object(g.a)(a))),a.handleSave=a.handleSave.bind(Object(g.a)(Object(g.a)(a))),a.showPicker=a.showPicker.bind(Object(g.a)(Object(g.a)(a))),a.hidePicker=a.hidePicker.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange.call(null,this.state.moment),this.setState({moment:e})}},{key:"handleSave",value:function(){this.setState({showPicker:!1})}},{key:"showPicker",value:function(e){this.setState({showPicker:!0})}},{key:"hidePicker",value:function(e){this.setState({showPicker:!1})}},{key:"value",value:function(){return this.state.moment.format("lll")}},{key:"render",value:function(){return i.a.createElement(n.Fragment,null,i.a.createElement(x.a,{onClickOutside:this.handleSave},i.a.createElement(V,{onChange:this.props.onChange,value:this.value(),bsSize:this.props.size,name:this.props.name,id:this.props.name,placeholder:this.props.placeholder,onFocus:this.showPicker,label:this.props.label,appendIcon:"fa fa-calendar"}),i.a.createElement("div",{id:"date-picker-container"},i.a.createElement(k.a,{moment:this.state.moment,onChange:this.onChange,minStep:5,onSave:this.handleSave,id:"datepicker",className:this.state.showPicker?"visible":"",prevMonthIcon:"fa fa-angle-double-left",nextMonthIcon:"fa fa-angle-double-right"}))))}}]),t}(n.Component),G=function(){return i.a.createElement(S.k,{className:"brand justify-content-center"},i.a.createElement("div",{className:"text-center align-self-center mt-5"},i.a.createElement(S.c,null,i.a.createElement("img",{src:C.a,alt:"auction logo"})),i.a.createElement(S.c,{xl:!0},i.a.createElement("h1",null,"Auctionify")),i.a.createElement(S.c,null,i.a.createElement("p",null,"001"))))},Q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={loading:!1,loadingText:"",title:"",description:"",minimumBid:R.clone(),auctionEnd:v()().add(3,"days").startOf("day")},a.createAuction=a.createAuction.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"createAuction",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0,loadingText:"Deploying Contract"}),a=new z.eth.Contract(J.a.API),n=[t.title,t.auctionEnd.unix().toString(),t.account,t.description,t.minimumBid.toString()],console.log("Deploy contract",n),a.deploy({data:J.a.bytecode,arguments:n}).send({from:t.account,gas:3e6}).on("error",function(e){console.log(e),i.setState({loading:!1})}).on("transactionHash",function(e){i.setState({loadingText:"Confirming ".concat(e.substr(0,10))})}).on("receipt",function(e){i.setState({loadingText:"Confirmed!"}),setTimeout(function(){i.setState({loading:!1}),i.props.history.push("/auction/".concat(e.contractAddress))},2e3)});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement(O.a,{background:"rgba(255,255,255,.8)",color:"#F60",active:this.state.loading,spinner:!0,text:this.state.loadingText},i.a.createElement(S.k,{className:"m-0"},i.a.createElement(S.c,{lg:"5",className:"accent-bg"},i.a.createElement(G,null)),i.a.createElement(S.c,{className:"py-4"},i.a.createElement(Y,{onSubmit:this.createAuction}))))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={title:"",description:"",minimumBid:R.clone(),auctionEnd:v()().add(3,"days").startOf("day"),account:K[0],accounts:K},a.onInputChange=a.onInputChange.bind(Object(g.a)(Object(g.a)(a))),a.createAuction=a.createAuction.bind(Object(g.a)(Object(g.a)(a))),a.onDateChange=a.onDateChange.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"onInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(s.a)({},n,a))}},{key:"onDateChange",value:function(e){this.setState({auctionEnd:e})}},{key:"createAuction",value:function(e){e.preventDefault(),this.props.onSubmit({title:this.state.title,description:this.state.description,minimumBid:this.state.minimumBid,auctionEnd:this.state.auctionEnd,account:this.state.account})}},{key:"render",value:function(){return i.a.createElement(n.Fragment,null,i.a.createElement(S.d,null,i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement("h3",{className:"title"},"Create an auction!")))),i.a.createElement(S.e,{onSubmit:this.createAuction,id:"auctionForm",className:"container"},i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement(V,{showLabel:!0,name:"title",label:"Title",placeholder:"Auction Title",onChange:this.onInputChange,value:this.state.title}))),i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement(V,{showLabel:!0,name:"description",label:"Description",placeholder:"Auction Description",type:"textarea",onChange:this.onInputChange,value:this.state.description}))),i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement(Z,{showLabel:!0,name:"auctionEnd",label:"Deadline",type:"date",onChange:this.onDateChange,value:this.state.auctionEnd}))),i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement(V,{showLabel:!0,min:R,name:"minimumBid",label:"Minimum Bid",placeholder:"0.01",append:"ETH",type:"eth",onChange:this.onInputChange,value:this.state.minimumBid}))),i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement(V,{showLabel:!0,name:"account",label:"Account",type:"select",onChange:this.onInputChange,value:this.state.account},this.state.accounts.map(function(e,t){return i.a.createElement("option",{key:t},e)})))),i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement(S.f,{className:"text-right"},i.a.createElement(S.b,{id:"createAuctionBtn",color:"primary"},"Create Auction"))))))}}]),t}(n.Component),$=function(e){if(!e.to||!e.now)return i.a.createElement("div",null);var t=v.a.duration(e.to-e.now),a=function(e){return(""+e).padStart(2,"0")};return i.a.createElement("div",{className:"countdown"},i.a.createElement("div",{className:"section"},i.a.createElement("span",{className:"time"},a(Math.floor(t.asDays()))),i.a.createElement("br",null),i.a.createElement("span",{className:"label"},"days")),i.a.createElement("div",{className:"section"},i.a.createElement("span",{className:"separater"},":"),i.a.createElement("br",null),"\xa0"),i.a.createElement("div",{className:"section"},i.a.createElement("span",{className:"time"},a(t.hours())),i.a.createElement("br",null),i.a.createElement("span",{className:"label"},"hours")),i.a.createElement("div",{className:"section"},i.a.createElement("span",{className:"separater"},":"),i.a.createElement("br",null),"\xa0"),i.a.createElement("div",{className:"section"},i.a.createElement("span",{className:"time"},a(t.minutes())),i.a.createElement("br",null),i.a.createElement("span",{className:"label"},"minutes")),i.a.createElement("div",{className:"section"},i.a.createElement("span",{className:"separater"},":"),i.a.createElement("br",null),"\xa0"),i.a.createElement("div",{className:"section"},i.a.createElement("span",{className:"time"},a(t.seconds())),i.a.createElement("br",null),i.a.createElement("span",{className:"label"},"seconds")))},q=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={style:{}},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.resize()}},{key:"resize",value:function(){if(this.containerEl){var e=parseInt(getComputedStyle(this.containerEl,null).getPropertyValue("padding-left"));this.setState({style:{width:"".concat(this.containerEl.offsetHeight,"px"),top:"".concat(this.containerEl.offsetHeight,"px"),marginLeft:"".concat(-e,"px")}})}}},{key:"render",value:function(){var e=this,t=this.props;if(!t.bid||t.bid.isZero())return"";var a=!1;return t.account&&t.account===t.bidder&&(a=!0),i.a.createElement(S.c,{sm:{size:8,offset:2},md:{size:6,offset:3},lg:{size:4,offset:4}},i.a.createElement("div",{className:"highest-bid container",ref:function(t){return e.containerEl=t}},i.a.createElement("div",{className:"hb-label",style:this.state.style,ref:function(t){return e.boxLabelEl=t}},i.a.createElement("i",{className:"fa fa-trophy"})," \xa0Highest Bid"),i.a.createElement(S.k,{className:"pl-4"},i.a.createElement(S.c,null,i.a.createElement("h3",null,H(t.bid).toString()," ETH"),i.a.createElement("div",{className:"bidder"},i.a.createElement("span",{className:"address"},t.bidder.substr(0,14)),i.a.createElement(S.a,{color:"dark",className:"you ".concat(a?"visible":"hidden")},i.a.createElement("i",{className:"fa fa-star"})," You"))))))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={loading:!0,loadingText:"loading auction"},a.bid=a.bid.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a,n,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new W.eth.Contract(J.a.API,this.props.match.params.address),window.contract=t,e.t0=K[0],e.next=5,t.methods.auctionTitle().call();case 5:return e.t1=e.sent,e.next=8,t.methods.auctionDescription().call();case 8:return e.t2=e.sent,e.next=11,t.methods.highestBidder().call();case 11:return e.t3=e.sent,e.t4=F,e.next=15,t.methods.minimumBid().call();case 15:return e.t5=e.sent,e.t6=new e.t4(e.t5),e.t7=F,e.next=20,t.methods.highestBid().call();case 20:return e.t8=e.sent,e.t9=new e.t7(e.t8),a={account:e.t0,title:e.t1,description:e.t2,highestBidder:e.t3,minimumBid:e.t6,highestBid:e.t9},e.next=25,t.methods.auctionEnd().call();case 25:n=e.sent,a.auctionEnd=v()(1e3*n),this.setState({auction:a,loading:!1}),t.events.HighestBidIncreased().on("data",function(e){var t=e.returnValues,a=t.bidder,n=new F(t.amount);i.setState({auction:Object(o.a)({},i.state.auction,{highestBidder:a,highestBid:n})})});case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"bid",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,i=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.bidAmount,n=new z.eth.Contract(J.a.API,this.props.match.params.address),this.setState({loading:!0,loadingText:"Sending Transaction"}),e.prev=3,e.next=6,n.methods.bid().send({from:this.state.auction.account,value:a}).on("transactionHash",function(e){i.setState({loadingText:"Confirming ".concat(e.substr(0,10))})}).on("error",function(e){i.setState({loading:!1})});case 6:this.setState({loading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({loading:!1});case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=i.a.createElement("div",{className:"accent-bg auction-placeholder"},i.a.createElement("span",null));return this.state.auction&&(e=i.a.createElement(_,{auction:this.state.auction,onBid:this.bid})),i.a.createElement(O.a,{background:"rgba(255,255,255,.7)",color:"#F60",active:this.state.loading,spinner:!0,text:this.state.loadingText},e)}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={now:v()(),bidAmount:a.minimumAcceptableBid()},a.onInputChange=a.onInputChange.bind(Object(g.a)(Object(g.a)(a))),a.submit=a.submit.bind(Object(g.a)(Object(g.a)(a))),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"onInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(s.a)({},n,a))}},{key:"componentDidMount",value:function(){var e=this;this.intervalId=setInterval(function(){e.setState({now:v()()})},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"minimumAcceptableBid",value:function(){return F.max(this.props.auction.minimumBid,this.props.auction.highestBid.add(R))}},{key:"submit",value:function(e){e.preventDefault(),this.props.onBid({bidAmount:this.state.bidAmount})}},{key:"componentDidUpdate",value:function(e){this.props.auction.highestBid!==e.auction.highestBid&&(console.log(this.state.bidAmount,this.props.auction.highestBid),console.log(this.state.bidAmount.toString(),this.props.auction.highestBid.add(R).toString()),this.setState({bidAmount:F.max(this.state.bidAmount,this.props.auction.highestBid.add(R))}))}},{key:"render",value:function(){var e=this.props.auction;if(!e)return"";var t="";return e.highestBid.isZero()||(t=i.a.createElement(q,{bid:e.highestBid,bidder:e.highestBidder,account:e.account})),i.a.createElement(S.k,{className:"m-0"},i.a.createElement(S.c,{lg:"12",className:"accent-bg auction-header container"},i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement("h1",{id:"auction-title"},e.title))),i.a.createElement(S.k,null,t),i.a.createElement(S.k,null,i.a.createElement(S.c,{className:"text-center p-0"},i.a.createElement($,{now:this.state.now,to:e.auctionEnd})))),i.a.createElement(S.c,{className:"py-4"},i.a.createElement(S.d,null,i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement("p",{id:"auction-description"},e.description.split(/\n/).map(function(e,t){return i.a.createElement(n.Fragment,{key:t},e,i.a.createElement("br",null))})))),i.a.createElement(S.k,{className:"bid-container"},i.a.createElement(S.c,{sm:{size:8,offset:2},md:{size:6,offset:3},lg:{size:4,offset:4}},i.a.createElement(S.e,{onSubmit:this.bid,id:"bidForm"},i.a.createElement(S.k,null,i.a.createElement(S.c,null,i.a.createElement(V,{showLabel:!0,name:"bidAmount",min:this.minimumAcceptableBid(),label:"Amount",placeholder:"0.01",type:"eth",append:"ETH",onChange:this.onInputChange,value:this.state.bidAmount}))),i.a.createElement(S.k,null,i.a.createElement(S.c,{className:"text-right"},i.a.createElement(S.b,{id:"bid",color:"primary",onClick:this.submit},"Bid")))))))))}}]),t}(n.Component),ee=function(){return i.a.createElement(S.d,{className:"footer"},i.a.createElement(S.k,{noGutters:!0},i.a.createElement(S.c,{className:"text-center text-lg-right"},i.a.createElement("a",{href:"https://github.com/auctionify/auctionify"},i.a.createElement("i",{className:"fa fa-github"})," Auctionify "),"| Made with ",i.a.createElement("i",{className:"fa fa-heart"})," in Montr\xe9al")))},te=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={loaded:!1},a.setup().then(function(){return console.log("Setup complete!")}),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"setup",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:if(t=e.sent,z=t.web3,W=t.readOnlyWeb3,F=W.utils.BN,M=W.utils.toWei,H=W.utils.fromWei,!z){e.next=12;break}return e.next=11,z.eth.getAccounts();case 11:K=e.sent;case 12:window.web3=z,window.readOnlyWeb3=W,window.BigNumber=F,R=new F(R),this.setState({loaded:!0});case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=i.a.createElement("div",null);return this.state.loaded&&(e=i.a.createElement(S.d,{className:"main-container"},i.a.createElement(S.d,{className:"main"},i.a.createElement(B.a,{path:"/",exact:!0,component:Object(A.a)(Q)}),i.a.createElement(B.a,{path:"/auction/:address",component:Object(A.a)(X)}),i.a.createElement(ee,null)))),i.a.createElement(I.a,null,e)}}]),t}(n.Component),ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(te,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");ae?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ne(e)})}}()}},[[156,2,1]]]);
//# sourceMappingURL=main.67e6415a.chunk.js.map